<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TortinhosBet - Cassino Online</title>
  <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="auth">
    <h1>TortinhosBet</h1>
    <div id="register">
      <h2>Cadastro</h2>
      <input id="register-user" placeholder="Usu√°rio" />
      <input id="register-pass" type="password" placeholder="Senha" />
      <button onclick="register()">Cadastrar</button>
      <p>J√° tem conta? <a href="#" onclick="showLogin()">Login</a></p>
    </div>
    <div id="login" style="display:none">
      <h2>Login</h2>
      <input id="login-user" placeholder="Usu√°rio" />
      <input id="login-pass" type="password" placeholder="Senha" />
      <button onclick="login()">Entrar</button>
      <p>N√£o tem conta? <a href="#" onclick="showRegister()">Cadastre-se</a></p>
    </div>
  </div>
  <div id="games" style="display:none">
    <header>
      <span id="user-info"></span>
      <span>Saldo: R$<span id="balance">0</span></span>
    </header>
    <nav>
      <button onclick="playMines()">üí£ Mines</button>
      <button onclick="playRoleta()">üêØ Roleta do Tigrinho</button>
      <button onclick="playAviator()">‚úàÔ∏è Aviator</button>
    </nav>
    <main id="game-container"></main>
  </div>
  <script>
    let currentUser = null;
    let users = {};

    function showLogin() {
      document.getElementById("login").style.display = "block";
      document.getElementById("register").style.display = "none";
    }

    function showRegister() {
      document.getElementById("register").style.display = "block";
      document.getElementById("login").style.display = "none";
    }

    function login() {
      const user = document.getElementById("login-user").value;
      const pass = document.getElementById("login-pass").value;
      if (users[user] && users[user].password === pass) {
        currentUser = user;
        document.getElementById("games").style.display = "block";
        document.getElementById("auth").style.display = "none";
        document.getElementById("balance").textContent = users[user].balance.toFixed(2);
        document.getElementById("user-info").textContent = `üë§ ${user}`;
      } else {
        alert("Usu√°rio ou senha incorretos!");
      }
    }

    function register() {
      const user = document.getElementById("register-user").value;
      const pass = document.getElementById("register-pass").value;
      if (!users[user]) {
        users[user] = { password: pass, balance: 1000 };
        alert("Cadastro realizado com sucesso!");
        showLogin();
      } else {
        alert("Usu√°rio j√° existe!");
      }
    }

    function playMines() {
      const gameContainer = document.getElementById("game-container");
      gameContainer.innerHTML = `
        <h3>üí£ Mines (6x6)</h3>
        <p>Escolha quanto quer apostar e o n√∫mero de minas:</p>
        <input type="number" id="mines-bet" placeholder="Valor da aposta" min="1" />
        <input type="number" id="mines-count" placeholder="N¬∫ de minas (1-20)" min="1" max="20" />
        <button onclick="startMinesGame()">Come√ßar</button>
        <div id="mines-board" style="display:grid; grid-template-columns:repeat(6, 50px); gap:5px; margin-top:10px;"></div>
        <div id="mines-result" style="margin-top: 1em;"></div>
      `;
    }

    let minesData = [];
    let revealedCells = 0;
    function startMinesGame() {
      const bet = parseFloat(document.getElementById("mines-bet").value);
      const minesCount = parseInt(document.getElementById("mines-count").value);
      const resultEl = document.getElementById("mines-result");

      if (isNaN(bet) || bet <= 0 || isNaN(minesCount) || minesCount < 1 || minesCount > 20) {
        resultEl.innerHTML = "Valores inv√°lidos.";
        return;
      }

      if (bet > users[currentUser].balance) {
        resultEl.innerHTML = "Saldo insuficiente!";
        return;
      }

      users[currentUser].balance -= bet;
      document.getElementById("balance").textContent = users[currentUser].balance.toFixed(2);
      minesData = Array(36).fill(false);
      revealedCells = 0;

      let minePositions = new Set();
      while (minePositions.size < minesCount) {
        minePositions.add(Math.floor(Math.random() * 36));
      }
      minePositions.forEach(pos => minesData[pos] = true);

      const board = document.getElementById("mines-board");
      board.innerHTML = "";

      for (let i = 0; i < 36; i++) {
        const cell = document.createElement("button");
        cell.style.width = "50px";
        cell.style.height = "50px";
        cell.textContent = "‚ùì";
        cell.onclick = () => revealCell(i, bet);
        board.appendChild(cell);
      }

      resultEl.innerHTML = "Boa sorte!";
    }

    function revealCell(index, bet) {
      const board = document.getElementById("mines-board");
      const resultEl = document.getElementById("mines-result");
      const cell = board.children[index];
      if (cell.disabled) return;

      if (minesData[index]) {
        cell.textContent = "üí£";
        resultEl.innerHTML = "üí• Voc√™ perdeu tudo!";
        Array.from(board.children).forEach((btn, i) => {
          btn.disabled = true;
          if (minesData[i]) btn.textContent = "üí£";
        });
      } else {
        cell.textContent = "‚úÖ";
        cell.disabled = true;
        revealedCells++;
        const profit = bet * (1 + revealedCells * 0.2);
        resultEl.innerHTML = `‚úÖ Casinhas seguras: ${revealedCells} - Ganhos atuais: R$${profit.toFixed(2)} <button onclick="withdrawMines(${profit.toFixed(2)})">Retirar</button>`;
      }
    }

    function withdrawMines(amount) {
      users[currentUser].balance += parseFloat(amount);
      document.getElementById("balance").textContent = users[currentUser].balance.toFixed(2);
      document.getElementById("mines-result").innerHTML = `üéâ Voc√™ retirou R$${parseFloat(amount).toFixed(2)}!`;
      Array.from(document.getElementById("mines-board").children).forEach(btn => btn.disabled = true);
    }
  </script>
</body>
</html>
